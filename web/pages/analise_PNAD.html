<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Análise de Criminalidade - PNAD 2009</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .container{
            height: 100%;
        }
        .home-link {
            margin-bottom: 2rem;
        }
        .home-link a {
            color: #2c3e50;
            text-decoration: none;
        }
        .chart-container {
            width: 100%;
            margin-top: 1rem;
            margin-bottom: 2rem;
            padding: 1rem 0;
        }
        .facet-grid {
            height: auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        .facet-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .facet-item h3 {
             color: #34495e;
             margin-bottom: 0.5rem;
             font-size: 1em;
        }
        /* Estilo para a tabela de correlação */
        .correlation-matrix {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .correlation-matrix th, .correlation-matrix td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .correlation-matrix th {
            background-color: #f2f2f2;
        }
        .correlation-matrix td {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="home-link"><a href="../../index.html">← Voltar à Página Inicial</a></p>

        <h1>Relatório de Análise de Criminalidade - PNAD 2009</h1>

        <h2>Análise Geral Consolidada</h2>
        [cite_start]<p>A análise dos dez gráficos revela uma narrativa multifacetada sobre a estabilidade e consistência das estimativas de vitimização no Brasil[cite: 329]. [cite_start]O Coeficiente de Variação (CV), métrica central deste estudo, indica o grau de imprecisão dos dados, sendo um indicador crucial para a confiabilidade das estatísticas de criminalidade[cite: 330]. Observa-se que a variabilidade não é uniforme. [cite_start]Perfis demográficos específicos, como o da população 'preta/parda', apresentam consistentemente CVs mais elevados, sugerindo que as estimativas de vitimização para este grupo são mais instáveis e variam mais significativamente entre as diferentes regiões do país[cite: 331]. [cite_start]Da mesma forma, faixas etárias mais jovens, como a de '16 a 24 anos', tendem a mostrar picos de variabilidade, especialmente para crimes como Roubo[cite: 332]. [cite_start]A desconfiança nas instituições e a percepção da gravidade do crime são fatores determinantes na subnotificação[cite: 333]. [cite_start]O Gráfico 3 mostra que motivos como 'não acreditavam na polícia' e 'medo de represálias' são relevantes, especialmente em crimes como agressão, enquanto a percepção de 'não era importante' predomina em furtos[cite: 334]. [cite_start]A análise de distribuição e geográfica reforça que a variabilidade não é apenas uma questão de perfil, mas também de localidade, com certas UFs exibindo dispersão de dados muito maior que outras[cite: 335]. Em suma, os dados não são homogêneos. [cite_start]A confiabilidade das estimativas de vitimização depende fortemente do perfil da vítima (raça, sexo, idade), do tipo de crime e da localidade[cite: 336].</p>

        <h2>Gráfico 1: Perfil Demográfico (Barras Agrupadas)</h2>
        [cite_start]<p><strong>Objetivo:</strong> Comparar a variabilidade (inconstância) das estimativas de vitimização entre diferentes perfis demográficos (sexo e cor/raça) para cada tipo de crime principal (Agressão, Furto, Roubo)[cite: 5].</p>
        <div class="chart-container">
            <canvas id="grafico1Canvas"></canvas>
        </div>

        <h2>Gráfico 2: Perfil por Faixa Etária (Linhas Múltiplas)</h2>
        [cite_start]<p><strong>Objetivo:</strong> Analisar como a variabilidade das estimativas de vitimização se comporta através das diferentes faixas etárias para cada tipo de crime[cite: 26].</p>
        <div class="chart-container">
            <canvas id="grafico2Canvas"></canvas>
        </div>

        <h2>Gráfico 3: Motivos para Não Registrar Ocorrência (Barras Empilhadas)</h2>
        [cite_start]<p><strong>Objetivo:</strong> Revelar e comparar a distribuição percentual dos motivos que levaram as vítimas a não procurarem a polícia, fazendo uma distinção por tipo de crime[cite: 45].</p>
        <div class="chart-container">
            <canvas id="grafico3Canvas"></canvas>
        </div>

        <h2>Gráfico 4: Representação dos Dados do Heatmap</h2>
        [cite_start]<p><strong>Objetivo:</strong> Fornecer uma visualização rápida e condensada da intensidade da variabilidade dos dados para cada combinação de tipo de crime e perfil demográfico[cite: 79]. <em>(Nota: O Heatmap foi representado como um gráfico de barras agrupadas para melhor compatibilidade).</em></p>
        <div class="chart-container">
            <canvas id="grafico4Canvas"></canvas>
        </div>

        <h2>Gráfico 5: Heatmap de Correlação (Crime de Agressão)</h2>
        [cite_start]<p><strong>Objetivo:</strong> Investigar se a variabilidade nas estimativas de vitimização por agressão dos diferentes perfis demográficos se movem em conjunto[cite: 116]. <em>(Nota: O Heatmap de correlação é representado abaixo como uma tabela com cores para facilitar a interpretação).</em></p>
        <div class="chart-container">
            <table class="correlation-matrix" id="correlationMatrix">
                <thead>
                    <tr><th></th><th>homens</th><th>mulheres</th><th>branca</th><th>preta/parda</th></tr>
                </thead>
                <tbody>
                    <tr><th>homens</th><td data-value="1.00">1.00</td><td data-value="0.30">0.30</td><td data-value="0.27">0.27</td><td data-value="0.14">0.14</td></tr>
                    <tr><th>mulheres</th><td data-value="0.30">0.30</td><td data-value="1.00">1.00</td><td data-value="0.48">0.48</td><td data-value="-0.04">-0.04</td></tr>
                    <tr><th>branca</th><td data-value="0.27">0.27</td><td data-value="0.48">0.48</td><td data-value="1.00">1.00</td><td data-value="-0.42">-0.42</td></tr>
                    <tr><th>preta/parda</th><td data-value="0.14">0.14</td><td data-value="-0.04">-0.04</td><td data-value="-0.42">-0.42</td><td data-value="1.00">1.00</td></tr>
                </tbody>
            </table>
        </div>

        <h2>Gráfico 6: Distribuição com Boxplot</h2>
        [cite_start]<p><strong>Objetivo:</strong> Comparar a distribuição completa (mediana, quartis, dispersão e outliers) do Coeficiente de Variação 'Total' entre os diferentes tipos de crime[cite: 159]. <em>(Nota: O Boxplot é representado por barras flutuantes que mostram o intervalo interquartil, de Q1 a Q3).</em></p>
        <div class="chart-container">
            <canvas id="grafico6Canvas"></canvas>
        </div>

        <h2>Gráfico 7: Gráfico de Radar Comparativo</h2>
        [cite_start]<p><strong>Objetivo:</strong> Comparar o 'formato' geral do perfil de variabilidade entre os diferentes crimes de forma simultânea e multidimensional[cite: 181].</p>
        <div class="chart-container">
            <canvas id="grafico7Canvas"></canvas>
        </div>

        <h2>Gráfico 8: Ranking Agregado de Perfis de Vítimas</h2>
        [cite_start]<p><strong>Objetivo:</strong> Classificar os perfis demográficos com base na sua variabilidade de dados média, agregando os resultados de todos os tipos de crime para criar um ranking geral[cite: 201].</p>
        <div class="chart-container">
            <canvas id="grafico8Canvas"></canvas>
        </div>
        
        <h2>Gráfico 9: Comparativo Homens vs. Mulheres</h2>
        [cite_start]<p><strong>Objetivo:</strong> Isolar e comparar diretamente a diferença na variabilidade das estimativas entre homens e mulheres para cada tipo de crime[cite: 227]. <em>(Nota: O Dumbbell Plot é representado por barras flutuantes que conectam os valores de homens e mulheres, destacando a diferença).</em></p>
        <div class="chart-container">
            <canvas id="grafico9Canvas"></canvas>
        </div>

        <h2>Gráfico 10: Variação Geográfica (Facet Grid)</h2>
        [cite_start]<p><strong>Objetivo:</strong> Desagregar a análise nacional para investigar como o perfil de variabilidade das vítimas de agressão se comporta em cada Unidade da Federação (UF) individualmente[cite: 247].</p>
        <div class="chart-container facet-grid" id="facetGridContainer">
            </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Configurações globais e paleta de cores para os gráficos
        const primaryColor = '#2c3e50';
        const textColor = '#34495e';
        const chartColors = ['#8e44ad', '#3498db', '#f39c12', '#c0392b', '#27ae60'];

        // --- Gráfico 1: Barras Agrupadas ---
        const ctx1 = document.getElementById('grafico1Canvas').getContext('2d');
        new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: ['Homens', 'Mulheres', 'Branca', 'Preta/Parda'],
                datasets: [
                    {
                        label: 'Agressão',
                        data: [8.58, 10.24, 9.94, 12.59],
                        backgroundColor: chartColors[0],
                    },
                    {
                        label: 'Furto',
                        data: [5.67, 10.75, 8.71, 11.84],
                        backgroundColor: chartColors[1],
                    },
                    {
                        label: 'Roubo',
                        data: [8.09, 8.84, 8.79, 10.24],
                        backgroundColor: chartColors[2],
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Perfil Demográfico por Tipo de Crime (CV Médio)', color: primaryColor, font: { size: 16 } },
                    legend: { position: 'top' }
                },
                scales: { y: { title: { display: true, text: 'Coeficiente de Variação Médio' } } }
            }
        });

        // --- Gráfico 2: Linhas Múltiplas ---
        const ctx2 = document.getElementById('grafico2Canvas').getContext('2d');
        new Chart(ctx2, {
            type: 'line',
            data: {
                labels: ['10 a 15 anos', '16 a 24 anos', '25 a 34 anos', '35 a 49 anos', '50 a 59 anos (ou mais)'],
                datasets: [
                    {
                        label: 'Agressão',
                        data: [9.3, 12.2, 8.3, 10.6, 8.1],
                        borderColor: chartColors[0],
                        backgroundColor: chartColors[0],
                        fill: false,
                        tension: 0.1
                    },
                    {
                        label: 'Furto',
                        data: [11.9, 11.8, 12.1, 9.7, 11.0],
                        borderColor: chartColors[1],
                        backgroundColor: chartColors[1],
                        fill: false,
                        tension: 0.1
                    },
                    {
                        label: 'Roubo',
                        data: [9.7, 13.1, 6.1, 10.8, 9.2],
                        borderColor: chartColors[2],
                        backgroundColor: chartColors[2],
                        fill: false,
                        tension: 0.1
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Perfil Etário da Vítima por Tipo de Crime (CV Médio)', color: primaryColor, font: { size: 16 } },
                    legend: { position: 'top' }
                },
                scales: { y: { title: { display: true, text: 'Coeficiente de Variação Médio' } } }
            }
        });

        // --- Gráfico 3: Barras Empilhadas ---
        const ctx3 = document.getElementById('grafico3Canvas').getContext('2d');
        new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: ['Furto', 'Agressão', 'Roubo'],
                datasets: [
                    { label: 'Falta de provas', data: [19.5, 17.7, 17.1], backgroundColor: chartColors[0] },
                    { label: 'Não era importante', data: [19.3, 22.4, 24.9], backgroundColor: chartColors[1] },
                    { label: 'Não acreditavam na polícia', data: [22.5, 20.1, 17.9], backgroundColor: chartColors[2] },
                    { label: 'Medo de represálias', data: [15.2, 17.3, 21.1], backgroundColor: chartColors[3] },
                    { label: 'Outro', data: [23.5, 22.5, 19.0], backgroundColor: chartColors[4] }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Motivos para Não Registrar Ocorrência (%)', color: primaryColor, font: { size: 16 } },
                    tooltip: { callbacks: { label: function(context) { return `${context.dataset.label}: ${context.raw}%`; } } }
                },
                scales: {
                    x: { stacked: true, title: { display: true, text: 'Percentual (%)' } },
                    y: { stacked: true }
                }
            }
        });
        
        // --- Gráfico 4: Representação do Heatmap ---
        const ctx4 = document.getElementById('grafico4Canvas').getContext('2d');
        new Chart(ctx4, {
            type: 'bar',
            data: {
                labels: ['Homens', 'Mulheres', 'Branca', 'Preta/Parda'],
                datasets: [
                    { label: 'Agressão', data: [8.58, 10.24, 9.94, 12.59], backgroundColor: chartColors[0] },
                    { label: 'Furto', data: [5.67, 10.75, 8.71, 11.84], backgroundColor: chartColors[1] },
                    { label: 'Roubo', data: [8.09, 8.84, 8.79, 10.24], backgroundColor: chartColors[2] }
                ]
            },
            options: {
                responsive: true,
                plugins: { title: { display: true, text: 'Dados do Heatmap Comparativo (CV Médio)', color: primaryColor, font: { size: 16 } } },
                scales: { y: { title: { display: true, text: 'Coeficiente de Variação' } } }
            }
        });

        // --- Gráfico 5: Coloração da Tabela de Correlação ---
        document.querySelectorAll('#correlationMatrix td').forEach(cell => {
            const value = parseFloat(cell.getAttribute('data-value'));
            const alpha = (Math.abs(value) * 0.6) + 0.2;
            if (value > 0) {
                cell.style.backgroundColor = `rgba(227, 73, 59, ${alpha})`;
            } else if (value < 0) {
                cell.style.backgroundColor = `rgba(62, 149, 205, ${alpha})`;
            } else {
                cell.style.backgroundColor = 'rgba(200, 200, 200, 0.2)';
            }
            if (value === 1.00) {
                 cell.style.backgroundColor = `rgba(192, 57, 43, 1)`;
                 cell.style.color = 'white';
            }
        });
        
        // --- Gráfico 6: Representação do Boxplot (Barras Flutuantes) ---
        const ctx6 = document.getElementById('grafico6Canvas').getContext('2d');
        new Chart(ctx6, {
            type: 'bar',
            data: {
                labels: ['Agressão', 'Furto', 'Roubo'],
                datasets: [{
                    label: 'Intervalo Interquartil (Q1 a Q3)',
                    data: [
                        [4.5, 13.5],
                        [5.0, 12.2],
                        [10.0, 13.5]
                    ],
                    backgroundColor: chartColors.slice(0, 3)
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Distribuição do CV (Intervalo Interquartil)', color: primaryColor, font: { size: 16 } },
                    legend: { display: false }
                },
                scales: { y: { title: { display: true, text: 'Coeficiente de Variação' } } }
            }
        });

        // --- Gráfico 7: Radar ---
        const ctx7 = document.getElementById('grafico7Canvas').getContext('2d');
        new Chart(ctx7, {
            type: 'radar',
            data: {
                labels: ['Homens', 'Mulheres', 'Preta/Parda', 'Branca'],
                datasets: [
                    {
                        label: 'Agressão',
                        data: [8.58, 10.24, 12.59, 9.94],
                        borderColor: chartColors[0],
                        backgroundColor: 'rgba(142, 68, 173, 0.2)'
                    },
                    {
                        label: 'Furto',
                        data: [5.67, 10.75, 11.84, 8.71],
                        borderColor: chartColors[1],
                        backgroundColor: 'rgba(52, 152, 219, 0.2)'
                    },
                    {
                        label: 'Roubo',
                        data: [8.09, 8.84, 10.24, 8.79],
                        borderColor: chartColors[2],
                        backgroundColor: 'rgba(243, 156, 18, 0.2)'
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Comparativo de Perfis de Vítimas por Crime (Radar)', color: primaryColor, font: { size: 16 } }
                }
            }
        });

        // --- Gráfico 8: Barras Horizontais ---
        const ctx8 = document.getElementById('grafico8Canvas').getContext('2d');
        new Chart(ctx8, {
            type: 'bar',
            data: {
                labels: ['Homens', 'Branca', 'Mulheres', 'Preta/Parda'],
                datasets: [{
                    label: 'CV Médio Agregado',
                    data: [7.45, 9.15, 9.94, 11.55],
                    backgroundColor: ['#f39c12', '#27ae60', '#8e44ad', '#c0392b']
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Ranking de Perfis por CV Médio (Todos os Crimes)', color: primaryColor, font: { size: 16 } },
                    legend: { display: false }
                },
                scales: { x: { title: { display: true, text: 'Coeficiente de Variação Médio Agregado' } } }
            }
        });

        // --- Gráfico 9: Representação Dumbbell (Barras Flutuantes) ---
        const ctx9 = document.getElementById('grafico9Canvas').getContext('2d');
        new Chart(ctx9, {
            type: 'bar',
            data: {
                labels: ['Agressão', 'Roubo', 'Furto'],
                datasets: [{
                    label: 'Diferença Homens vs. Mulheres',
                    data: [
                        [8.58, 10.24],
                        [8.09, 8.84],
                        [5.67, 10.75]
                    ],
                    backgroundColor: chartColors.slice(0, 3)
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                plugins: {
                    title: { display: true, text: 'Comparativo do CV: Homens vs. Mulheres', color: primaryColor, font: { size: 16 } },
                    legend: { display: false }
                },
                scales: { x: { title: { display: true, text: 'Coeficiente de Variação Médio' } } }
            }
        });
        
        // --- Gráfico 10: Facet Grid ---
        const facetGridContainer = document.getElementById('facetGridContainer');
        const facetData = [
            { uf: 'UF_1', data: [11.0, 7.5, 2.8, 12.0] }, { uf: 'UF_2', data: [11.5, 13.0, 10.5, 9.5] },
            { uf: 'UF_3', data: [9.0, 12.5, 10.0, 13.0] }, { uf: 'UF_4', data: [7.0, 12.0, 7.5, 14.0] },
            { uf: 'UF_5', data: [9.5, 3.0, 15.0, 4.0] }, { uf: 'UF_6', data: [1.8, 6.0, 7.0, 8.0] },
            { uf: 'UF_7', data: [2.5, 1.0, 0.5, 15.0] }, { uf: 'UF_8', data: [9.0, 6.0, 10.0, 16.0] },
            { uf: 'UF_9', data: [4.0, 18.0, 19.5, 6.0] }, { uf: 'UF_10', data: [17.5, 12.0, 11.0, 13.0] }
        ];

        facetData.forEach((item, index) => {
            const facetItem = document.createElement('div');
            facetItem.className = 'facet-item';
            const title = document.createElement('h3');
            title.textContent = item.uf;
            const canvas = document.createElement('canvas');
            canvas.id = `facetCanvas_${index}`;
            facetItem.appendChild(title);
            facetItem.appendChild(canvas);
            facetGridContainer.appendChild(facetItem);

            new Chart(canvas.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Homens', 'Mulheres', 'Branca', 'Preta/Parda'],
                    datasets: [{
                        label: 'CV', data: item.data,
                        backgroundColor: ['#7b1fa2', '#ce93d8', '#f06292', '#ffb74d']
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: true,
                    plugins: { legend: { display: false } },
                    scales: { 
                        y: { beginAtZero: true, title: { display: index % 2 === 0, text: 'CV' } },
                        x: { ticks: { maxRotation: 70, minRotation: 70 } }
                    }
                }
            });
        });
    });
    </script>
<script src="../app.js"></script>
</body>
</html>